<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice Assistant</title>
  <link rel="stylesheet" href="/static/style.css">
  <script src="https://cdn.jsdelivr.net/gh/mattdiamond/Recorderjs@master/dist/recorder.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ™ï¸ Voice Assistant</h1>
      <p class="subtitle">Speak naturally - I'll listen and respond</p>
    </header>

    <main>
      <div class="status-container">
        <div class="status-header">
          <span class="status-label">Status:</span>
          <span id="status" class="status-text">Ready</span>
        </div>
        <div class="connection-status">
          <span id="connectionStatus" class="disconnected">â— Disconnected</span>
        </div>
      </div>

      <div class="visualizer-container">
        <h3>Audio Level</h3>
        <div class="visualizer" id="visualizer">
          <!-- Bars will be generated by JavaScript -->
        </div>
        <div class="visualizer-info">
          <span>Silent</span>
          <span id="volumeLevel">0%</span>
          <span>Loud</span>
        </div>
      </div>

      <div class="controls">
        <button id="startBtn" class="btn start-btn">
          <span class="btn-icon">ğŸ¤</span>
          <span class="btn-text">Start Listening</span>
        </button>
        <button id="stopBtn" class="btn stop-btn" disabled>
          <span class="btn-icon">â¹ï¸</span>
          <span class="btn-text">Stop</span>
        </button>
        <button id="resetBtn" class="btn reset-btn">
          <span class="btn-icon">ğŸ”„</span>
          <span class="btn-text">Reset</span>
        </button>
      </div>

      <div class="conversation-container">
        <h3>Conversation</h3>
        <div class="conversation-log" id="conversationLog">
          <!-- Messages will be added here -->
        </div>
      </div>

      <div class="settings">
        <h3>Settings</h3>
        <div class="setting-item">
          <label for="silenceThreshold">Silence Detection (seconds):</label>
          <input type="range" id="silenceThreshold" min="1" max="10" value="3">
          <span id="thresholdValue">3s</span>
        </div>
        <div class="setting-item">
          <label for="autoRestart">
            <input type="checkbox" id="autoRestart" checked>
            Auto-restart after response
          </label>
        </div>
      </div>
    </main>

    <footer>
      <p>Voice Assistant v1.0 | Connected to WebSocket</p>
    </footer>
  </div>

  <!-- Audio element for playing responses -->
  <audio id="responseAudio" hidden></audio>

  <script src="/static/script.js"></script>
</body>
</html>